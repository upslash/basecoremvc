@model Clayton.Models.DashboardViewModel


<a class="btn btn-primary" asp-controller="Dashboard" asp-action="AddPost">New Post</a>

<h3>Active Posts</h3>
<table class="table table-bordered">
    <thead>
        <tr>
            <th>Post Title</th>
            <th>Post Date</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>

        @foreach (var post in Model.Posts.Where(x => !x.DeletedDate.HasValue))
        {
            <tr>
                <th>@post.Title</th>
                <td>@post.Createdate</td>
                <td>
                    <a class="btn btn-sm btn-primary" asp-controller="Dashboard" asp-action="EditPost" asp-route-postId="@post.PostId">Edit</a>
                    <a class="btn btn-sm btn-danger" asp-controller="Dashboard" asp-action="DeletePost" asp-route-postId="@post.PostId">Delete</a>
                </td>
            </tr>

        }
    </tbody>
</table>

<h3>Recently Deleted</h3>

<table class="table table-danger">
    <thead>
        <tr>
            <th>Post Title</th>
            <th>Deleted Date</th>
            <th>Actions</th>
        </tr>
    </thead>
    <tbody>

        @foreach (var post in Model.Posts.Where(x => x.DeletedDate.HasValue))
        {
            <tr>
                <th>@post.Title</th>
                <td>@post.DeletedDate</td>
                <td>
                    @*<a class="btn btn-sm btn-danger postHardDelete" data-postid="@post.PostId" href="">Hard Delete</a>*@
                    <a class="btn btn-sm btn-danger" data-postid="@post.PostId" asp-controller="Dashboard" asp-action="HardDelete" asp-route-postId="@post.PostId">Hard Delete</a>
                    <a class="btn btn-sm btn-danger" asp-controller="Dashboard" asp-action="RevivePost" asp-route-postId="@post.PostId">Revive Post</a>
                </td>
            </tr>

        }
    </tbody>
</table>

@*<div class="modal fade" id="HardDeleteModal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Confirm</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to permanently remove this post?</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" id="ConfirmHardDeleteBtn">Confirm Delete</button>
                <button type="button" class="btn btn-secondary" data-dismiss="modal" id="CancelHardDelete">Cancel</button>
            </div>
        </div>
    </div>
</div>*@

<script>

    @*var hardDeleteId;

    $(".postHardDelete").click(function() {
        var postId = $(this).data("postid");
        hardDeleteId = postId;
        console.log(postId);
        $('#HardDeleteModal').modal('show');
        return false;
    });

    $("#ConfirmHardDeleteBtn").click(function () {

        console.log(hardDeleteId);
        $.post('@Url.Action("HardDelete","Dashboard")', { postId: hardDeleteId });
        hardDeleteId = null;
    });

    $("#CancelHardDelete").click(function () {
        hardDeleteId = null;
    });*@


</script>


